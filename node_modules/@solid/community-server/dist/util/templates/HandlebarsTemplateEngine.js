"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.HandlebarsTemplateEngine = void 0;
const handlebars_1 = require("handlebars");
const TemplateEngine_1 = require("./TemplateEngine");
/**
 * Fills in Handlebars templates.
 */
class HandlebarsTemplateEngine {
    /**
     * @params baseUrl - Base URL of the server.
     * @param template - The default template @range {json}
     */
    constructor(baseUrl, template) {
        this.baseUrl = baseUrl;
        this.applyTemplate = (0, TemplateEngine_1.readTemplate)(template)
            .then((templateString) => (0, handlebars_1.compile)(templateString));
    }
    async render(contents, template) {
        const applyTemplate = template ? (0, handlebars_1.compile)(await (0, TemplateEngine_1.readTemplate)(template)) : await this.applyTemplate;
        return applyTemplate({ ...contents, baseUrl: this.baseUrl });
    }
}
exports.HandlebarsTemplateEngine = HandlebarsTemplateEngine;
//# sourceMappingURL=HandlebarsTemplateEngine.js.map