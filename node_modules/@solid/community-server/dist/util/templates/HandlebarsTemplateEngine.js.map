{"version":3,"file":"HandlebarsTemplateEngine.js","sourceRoot":"","sources":["../../../src/util/templates/HandlebarsTemplateEngine.ts"],"names":[],"mappings":";;;AAGA,2CAAqC;AAErC,qDAAgD;AAGhD;;GAEG;AACH,MAAa,wBAAwB;IAInC;;;OAGG;IACH,YAAmB,OAAe,EAAE,QAAmB;QACrD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,aAAa,GAAG,IAAA,6BAAY,EAAC,QAAQ,CAAC;aACxC,IAAI,CAAC,CAAC,cAAsB,EAAoB,EAAE,CAAC,IAAA,oBAAO,EAAC,cAAc,CAAC,CAAC,CAAC;IACjF,CAAC;IAIM,KAAK,CAAC,MAAM,CAAc,QAAiB,EAAE,QAAmB;QACrE,MAAM,aAAa,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAA,oBAAO,EAAC,MAAM,IAAA,6BAAY,EAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,CAAC,aAAa,CAAC;QAClG,OAAO,aAAa,CAAC,EAAE,GAAG,QAAQ,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;IAC/D,CAAC;CACF;AApBD,4DAoBC","sourcesContent":["/* eslint-disable tsdoc/syntax */\n// tsdoc/syntax cannot handle `@range`\nimport type { TemplateDelegate } from 'handlebars';\nimport { compile } from 'handlebars';\nimport type { TemplateEngine, Template } from './TemplateEngine';\nimport { readTemplate } from './TemplateEngine';\nimport Dict = NodeJS.Dict;\n\n/**\n * Fills in Handlebars templates.\n */\nexport class HandlebarsTemplateEngine<T extends Dict<any> = Dict<any>> implements TemplateEngine<T> {\n  private readonly applyTemplate: Promise<TemplateDelegate>;\n  private readonly baseUrl: string;\n\n  /**\n   * @params baseUrl - Base URL of the server.\n   * @param template - The default template @range {json}\n   */\n  public constructor(baseUrl: string, template?: Template) {\n    this.baseUrl = baseUrl;\n    this.applyTemplate = readTemplate(template)\n      .then((templateString: string): TemplateDelegate => compile(templateString));\n  }\n\n  public async render(contents: T): Promise<string>;\n  public async render<TCustom = T>(contents: TCustom, template: Template): Promise<string>;\n  public async render<TCustom = T>(contents: TCustom, template?: Template): Promise<string> {\n    const applyTemplate = template ? compile(await readTemplate(template)) : await this.applyTemplate;\n    return applyTemplate({ ...contents, baseUrl: this.baseUrl });\n  }\n}\n"]}