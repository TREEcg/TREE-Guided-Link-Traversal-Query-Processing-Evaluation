"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.InteractionRouteHandler = void 0;
const NotFoundHttpError_1 = require("../../../util/errors/NotFoundHttpError");
const InteractionHandler_1 = require("../InteractionHandler");
/**
 * InteractionHandler that only accepts operations with an expected path.
 *
 * Rejects operations that target a different path,
 * otherwise the input parameters are passed to the source handler.
 */
class InteractionRouteHandler extends InteractionHandler_1.InteractionHandler {
    constructor(route, source) {
        super();
        this.route = route;
        this.source = source;
    }
    async canHandle(input) {
        const { target } = input.operation;
        const path = this.route.getPath();
        if (target.path !== path) {
            throw new NotFoundHttpError_1.NotFoundHttpError();
        }
        await this.source.canHandle(input);
    }
    async handle(input) {
        return this.source.handle(input);
    }
}
exports.InteractionRouteHandler = InteractionRouteHandler;
//# sourceMappingURL=InteractionRouteHandler.js.map