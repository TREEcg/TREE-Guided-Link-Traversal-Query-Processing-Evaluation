"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SubdomainIdentifierGenerator = void 0;
const PathUtil_1 = require("../../util/PathUtil");
const StringUtil_1 = require("../../util/StringUtil");
/**
 * Generates identifiers by using the name as a subdomain on the base URL.
 * Non-alphanumeric characters will be replaced with `-`.
 */
class SubdomainIdentifierGenerator {
    constructor(baseUrl) {
        this.baseParts = (0, PathUtil_1.extractScheme)((0, PathUtil_1.ensureTrailingSlash)(baseUrl));
    }
    generate(name) {
        // Using the punycode converter is a risk as it doesn't convert slashes for example
        const cleanName = (0, StringUtil_1.sanitizeUrlPart)(name);
        return { path: `${this.baseParts.scheme}${cleanName}.${this.baseParts.rest}` };
    }
}
exports.SubdomainIdentifierGenerator = SubdomainIdentifierGenerator;
//# sourceMappingURL=SubdomainIdentifierGenerator.js.map